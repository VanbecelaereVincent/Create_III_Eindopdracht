"use strict";function getWeatherByCity(e,t){var o=new XMLHttpRequest,s=0;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+e+'")',o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){null!=JSON.parse(o.responseText).query.results&&(s+=1,console.log("test")),t(s)}},chosen_city=(chosen_city=e).toUpperCase(),o.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),o.send(),s=0}function checkInput(e){1==state?getWeatherByCity(e,function(t){console.log(t),1==t?(writeInput(e),createAndAddNewResponse("Chosen city: "+chosen_city),console.log("value gevonden"),console.log(state+" state"),checkstate(state+=1),createAndAddNewResponse("Ask me anything. <br> Typing '--' will perform a reset and delete all messages.")):(writeInput(e),createAndAddNewResponse("I don't know this city, try again."),console.log("value niet gevonden"))}):state>1&&(checkForData(e,datakeywords),checkstate(state))}function checkcondition(e){e.toLowerCase().indexOf("cloudy")>=0?(body.style.background='url("../images/clouds.jpg")',body.style.backgroundSize="cover",body.style.backgroundPosition="center",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("snow")>=0?(body.style.background='url("../images/snow.jpg")',body.style.backgroundSize="cover",body.style.backgroundPosition="center",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("showers")>=0||e.toLowerCase().indexOf("rain")>=0?(body.style.background='url("../images/rain.jpg")',body.style.backgroundSize="cover",body.style.backgroundPosition="center",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("sunny")>=0&&(body.style.background='url("../images/sunny.jpg")',body.style.backgroundSize="cover",body.style.backgroundPosition="center",body.style.backgroundAttachment="fixed")}function deletePunctationMarks(e){return"!"!=e[e.length-1]&&"."!=e[e.length-1]&&"?"!=e[e.length-1]||(e=e.slice(0,-1)),e=e.toLowerCase()}function check_is_keywords(e){var t=(e=deletePunctationMarks(e)).split(" ");return"is"==t[0]||"do"==t[0]}function check_what_keywords(e){var t=(e=deletePunctationMarks(e)).split(" ");return"how"==t[0]||"how's"==t[0]||"what's"==t[0]||"whats"==t[0]||"what"==t[0]&&"is"==t[1]||"could"==t[0]&&"you"==t[1]||"would"==t[0]&&"you"==t[1]}function checkForData(e,t){writeInput(e);var o=1,s=(e=deletePunctationMarks(e)).split(" "),a=new XMLHttpRequest;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+chosen_city+'") and u="c"',console.log(query),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var n=JSON.parse(a.responseText).query.results.channel;console.log(n),console.log(n.item.condition.temp),checkcondition(n.item.condition.text);for(var i=0;i<s.length;i++)if(~t.indexOf(s[i]))switch(o+=1,s[i]){case"weather":if(check_is_keywords(e)){for(var r=0;r<s.length;r++)if(~t.indexOf(s[r]))switch(console.log(s[r]),console.log("test"),s[r]){case"good":case"hot":case"nice":console.log(n.item.condition.temp),createAndAddNewResponse(n.item.condition.temp>20?"Yes, indeed,  we have good weather! :) ":"Nope, the weather is not all that good. :'(");break;case"bad":case"ugly":createAndAddNewResponse(n.item.condition.temp<20?"Yes, indeed, today we have bad weather! :( ":"Nope, the weather is actually quite good! :)")}}else createAndAddNewResponse(check_what_keywords(e)?"At the moment the temperature is "+n.item.condition.temp+" °C and the conditions are: "+n.item.condition.text.toLowerCase()+".":"Please write a full sentence, you lazy one.");break;case"temperature":if(check_what_keywords(e)){createAndAddNewResponse("The temperature is "+n.item.condition.temp+" °C.");break}if("is"==s[0]){for(var c=0;c<s.length;c++)if(~t.indexOf(s[c]))switch(console.log(s[c]),console.log("test"),s[c]){case"good":case"nice":case"hot":case"warm":if(console.log(n.item.condition.temp),n.item.condition.temp>20){createAndAddNewResponse("Yes, it's a hot day! The temperature is "+n.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, today is a cold day. It's only "+n.item.condition.temp+" °C.");break;case"bad":case"cold":case"ugly":if(n.item.condition.temp<15){createAndAddNewResponse("Yes, today you should remain inside. The temperature is only  "+n.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, it's quite hot today. The temperature is "+n.item.condition.temp+" °C.")}}else createAndAddNewResponse("Please write a full sentence, you lazy one.");break;case"humidity":createAndAddNewResponse(check_what_keywords(e)?"The humidity is "+n.atmosphere.humidity+"%.":"Please write a full sentence, you lazy one.");break;case"sunrise":createAndAddNewResponse("The sunrise is at "+n.astronomy.sunrise+".");break;case"sunset":createAndAddNewResponse("The sunset is at "+n.astronomy.sunset+".");break;case"windspeed":case"wind":createAndAddNewResponse(check_what_keywords(e)?"The windspeed is "+n.wind.speed+" km/h.":"Please write a full sentence, you lazy one.");break;case"forecast":if(check_what_keywords(e)){createAndAddNewResponse(n.item.forecast[0].day+", "+n.item.forecast[0].date+": Max = "+n.item.forecast[0].high+" °C, Min: "+n.item.forecast[0].low+"°C</br>"+n.item.forecast[1].day+", "+n.item.forecast[1].date+": Max = "+n.item.forecast[1].high+" °C, Min: "+n.item.forecast[1].low+"°C</br>"+n.item.forecast[2].day+", "+n.item.forecast[2].date+": Max = "+n.item.forecast[2].high+" °C, Min: "+n.item.forecast[2].low+"°C</br>"+n.item.forecast[3].day+", "+n.item.forecast[3].date+": Max = "+n.item.forecast[3].high+" °C, Min: "+n.item.forecast[3].low+"°C</br>"+n.item.forecast[4].day+", "+n.item.forecast[4].date+": Max = "+n.item.forecast[4].high+" °C, Min: "+n.item.forecast[4].low+"°C</br>"+n.item.forecast[5].day+", "+n.item.forecast[5].date+": Max = "+n.item.forecast[5].high+" °C, Min: "+n.item.forecast[5].low+"°C</br>"+n.item.forecast[6].day+", "+n.item.forecast[6].date+": Max = "+n.item.forecast[6].high+" °C, Min: "+n.item.forecast[6].low+"°C</br>"+n.item.forecast[7].day+", "+n.item.forecast[7].date+": Max = "+n.item.forecast[7].high+" °C, Min: "+n.item.forecast[7].low+"°C</br>"+n.item.forecast[8].day+", "+n.item.forecast[8].date+": Max = "+n.item.forecast[8].high+" °C, Min: "+n.item.forecast[8].low+"°C</br>"+n.item.forecast[9].day+", "+n.item.forecast[9].date+": Max = "+n.item.forecast[9].high+" °C, Min: "+n.item.forecast[9].low+"°C");break}case"--":removeAllOutput(),checkstate(state),body.style.background='url("../images/normal.jpg")',body.style.backgroundSize="cover",body.style.backgroundPosition="center",body.style.backgroundAttachment="fixed"}return 1==o&&createAndAddNewResponse("I don't understand what you're saying. Might I suggest google?"),o=1,!1}},a.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),a.send()}function checkstate(e){1==e&&(input.placeholder="Enter a city",createAndAddNewResponse("Please enter a city.")),e>1&&(input.placeholder="Ask me anything")}function removeAllOutput(){for(messages=document.querySelector(".chatwindow");messages.hasChildNodes();)messages.removeChild(messages.firstChild);return state=1}function writeInput(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#8BFD",t.style.color="white",t.style.float="right",t.style.padding="10px",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var o=document.createElement("section");o.style.clear="both",messages.appendChild(t),messages.append(o),messages.lastChild.scrollIntoView(!0)}function createAndAddNewResponse(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#F6F4F5",t.style.padding="10px",t.style.float="left",t.style.color="#666465",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var o=document.createElement("section");o.style.clear="both",messages.appendChild(t),messages.appendChild(o),messages.lastChild.scrollIntoView(!0)}console.log("d");var chosen_city,query="",holder="",input="",messages="",chatwindow="",help="",form_box="",body="",citydata="",datakeywords=["--","weather","wind","windspeed","humidity","sunrise","sunset","warm","temperature","rain","clouds","hot","cold","freezing","freeze","snow","fahrenheit","kelvin","time","forecast","date","nice","good","bad","ugly"],leestekens=[".","?","!",","],state=1;document.addEventListener("DOMContentLoaded",function(){input=document.querySelector(".input__text"),holder=document.querySelector(".holder"),messages=document.querySelector(".chatwindow"),help=document.querySelector(".title__help"),form_box=document.querySelector(".form_box"),body=document.querySelector("body"),console.log(body),checkstate(state),document.addEventListener("keypress",function(e){13==e.keyCode&&(checkInput(input.value),input.value="")}),help.addEventListener("click",function(e){form_box.style.display="flex",form_box.style.alignItems="center"})});
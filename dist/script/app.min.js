"use strict";function getWeatherByCity(e){var t=new XMLHttpRequest;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+e+'")',t.onreadystatechange=function(){if(4==this.readyState&&200==this.status)JSON.parse(t.responseText).query.results.channel},chosen_city=e,t.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),t.send()}function checkInput(e){1==state?""!=checkForCity(e)&&(checkForCity(e),checkstate(state+=1),createAndAddNewResponse("Ask my anything. <br> Typing '--' will perform a reset and delete all messages")):state>1&&(checkForData(e,datakeywords),checkstate(state))}function checkForCity(e){return getWeatherByCity(e)}function deletePunctationMarks(e){return"!"!=e[e.length-1]&&"."!=e[e.length-1]&&"?"!=e[e.length-1]||(e=e.slice(0,-1)),e=e.toLowerCase()}function checkForData(e,t){writeInput(e);var s=(e=deletePunctationMarks(e)).split(" "),o=new XMLHttpRequest;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+chosen_city+'") and u="c"',console.log(query),o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(o.responseText).query.results.channel;console.log(e),console.log(e.item.condition.temp);for(var n=0;n<s.length;n++)if(1==input_found&&createAndAddNewResponse("I don't understand what you're saying. Might I suggest google?"),~t.indexOf(s[n]))switch(input_found+=1,s[n]){case"weather":if("is"==s[0]||"do"==s[0]){for(var a=0;a<s.length;a++)if(~t.indexOf(s[a]))switch(console.log(s[a]),console.log("test"),s[a]){case"good":case"hot":case"nice":console.log(e.item.condition.temp),createAndAddNewResponse(e.item.condition.temp>20?"Yes, indeed, today we have good weather! :) ":"Nope, today the weahter is not all that good. :'(");break;case"bad":case"ugly":createAndAddNewResponse(e.item.condition.temp<15?"Yes, indeed, today we have bad weather! :( ":"Nope, today the weahter is acutally quite good! :)(")}}else("how"==s[0]||"how's"==s[0]||"what's"==s[0]||"what"==s[0]&&"is"==s[1])&&createAndAddNewResponse("Today the temperature is "+e.item.condition.temp+" °C and the conditions are: "+e.item.condition.text.toLowerCase());break;case"temperature":if("how"==s[0]||"how's"==s[0]||"what's"==s[0]||"what"==s[0]&&"is"==s[1]){createAndAddNewResponse("The temperature is "+e.item.condition.temp+" °C.");break}if("is"==s[0])for(var i=0;i<s.length;i++)if(~t.indexOf(s[i]))switch(console.log(s[i]),console.log("test"),s[i]){case"good":case"nice":case"hot":case"warm":if(console.log(e.item.condition.temp),e.item.condition.temp>20){createAndAddNewResponse("Yes, it's a hot day! The temperature is "+e.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, today is a cold day. It's only "+e.item.condition.temp+" °C.");break;case"bad":case"cold":case"ugly":if(e.item.condition.temp<15){createAndAddNewResponse("Yes, today you should remain inside. The temperature is only  "+e.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, it's quite hot today. The temperature is "+e.item.condition.temp+" °C.")}break;case"sunrise":createAndAddNewResponse("The sunrise is at "+e.astronomy.sunrise);break;case"sunset":createAndAddNewResponse("The sunset is at "+e.astronomy.sunset);break;case"humidity":createAndAddNewResponse("The humidity is "+e.atmosphere.humidity+"%.");break;case"--":removeAllOutput(),checkstate(state)}return input_found=1,!1}},o.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),o.send()}function checkstate(e){1==e&&(input.placeholder="Enter a city",createAndAddNewResponse("Please enter a city.")),e>1&&(input.placeholder="Ask me anything")}function removeAllOutput(){for(messages=document.querySelector(".chatwindow");messages.hasChildNodes();)messages.removeChild(messages.firstChild);return state=1}function writeInput(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#8BFD",t.style.color="white",t.style.float="right",t.style.padding="10px",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var s=document.createElement("section");s.style.clear="both",messages.appendChild(t),messages.append(s),messages.lastChild.scrollIntoView(!0),console.log("ikschweg")}function createAndAddNewResponse(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#F6F4F5",t.style.padding="10px",t.style.float="left",t.style.color="#666465",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var s=document.createElement("section");s.style.clear="both",messages.appendChild(t),messages.appendChild(s),messages.lastChild.scrollIntoView(!0)}function getRandomResponse(e){return e[Math.floor(Math.random()*e.length)]}console.log("dfqdfqdf");var chosen_city,query="",holder="",input="",city="",messages="",chatwindow="",citydata="",datakeywords=["--","weather","humidity","sunrise","sunset","warm","temperature","rain","clouds","hot","cold","freezing","freeze","snow","fahrenheit","kelvin","time","forecast","date","nice","good","bad","ugly"],leestekens=[".","?","!"],state=1,input_found=1,output="",adjectives=[];document.addEventListener("DOMContentLoaded",function(){input=document.querySelector(".input__text"),holder=document.querySelector(".holder"),messages=document.querySelector(".chatwindow"),checkstate(state),document.addEventListener("keypress",function(e){13==e.keyCode&&(checkInput(input.value),input.value="")})});
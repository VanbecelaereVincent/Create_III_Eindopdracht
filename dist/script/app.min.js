"use strict";function getWeatherByCity(e,t){var o=new XMLHttpRequest;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+e+'")',o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(o.responseText).query.results.channel;bool+=1,console.log("test")}},chosen_city=e,o.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),o.send(),t(bool),bool=0}function checkInput(e){var t=0;if(1==state)switch(getWeatherByCity(e,function(e){console.log(e),1==e?(t=1,console.log("value gevonden")):(t=0,console.log("value niet gevonden"))}),console.log("mijn citygevondenstate is: "+t),t){case 1:getWeatherByCity(e,function(e){console.log(e)}),console.log(state+" state"),checkstate(state+=1),createAndAddNewResponse("Ask my anything. <br> Typing '--' will perform a reset and delete all messages");break;case 0:createAndAddNewResponse("I don't know this city, try again."),console.log("nope")}else state>1&&(checkForData(e,datakeywords),checkstate(state))}function checkcondition(e){e.toLowerCase().indexOf("cloudy")>=0?(body.style.background='url("../images/clouds.jpg")',body.style.backgroundSize="cover",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("snow")>=0?(body.style.background='url("../images/snow.jpg")',body.style.backgroundSize="cover",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("showers")>=0?(body.style.background='url("../images/rain.jpg")',body.style.backgroundSize="cover",body.style.backgroundAttachment="fixed"):e.toLowerCase().indexOf("sunny")>=0&&(body.style.background='url("../images/sunny.jpg")',body.style.backgroundSize="cover",body.style.backgroundAttachment="fixed")}function deletePunctationMarks(e){return"!"!=e[e.length-1]&&"."!=e[e.length-1]&&"?"!=e[e.length-1]||(e=e.slice(0,-1)),e=e.toLowerCase()}function checkForData(e,t){writeInput(e);var o=1,s=(e=deletePunctationMarks(e)).split(" "),n=new XMLHttpRequest;query='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+chosen_city+'") and u="c"',console.log(query),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(n.responseText).query.results.channel;console.log(e),console.log(e.item.condition.temp),checkcondition(e.item.condition.text);for(var a=0;a<s.length;a++)if(~t.indexOf(s[a]))switch(o+=1,s[a]){case"weather":if("is"==s[0]||"do"==s[0]){for(var d=0;d<s.length;d++)if(~t.indexOf(s[d]))switch(console.log(s[d]),console.log("test"),s[d]){case"good":case"hot":case"nice":console.log(e.item.condition.temp),createAndAddNewResponse(e.item.condition.temp>20?"Yes, indeed, today we have good weather! :) ":"Nope, today the weahter is not all that good. :'(");break;case"bad":case"ugly":createAndAddNewResponse(e.item.condition.temp<15?"Yes, indeed, today we have bad weather! :( ":"Nope, today the weahter is acutally quite good! :)(")}}else createAndAddNewResponse("how"==s[0]||"how's"==s[0]||"what's"==s[0]||"what"==s[0]&&"is"==s[1]?"Today the temperature is "+e.item.condition.temp+" °C and the conditions are: "+e.item.condition.text.toLowerCase():"Please write a full sentence, O lazy one.");break;case"temperature":if("how"==s[0]||"how's"==s[0]||"what's"==s[0]||"what"==s[0]&&"is"==s[1]||"could"==s[0]&&"you"==s[1]||"would"==s[0]&&"you"==s[1]){createAndAddNewResponse("The temperature is "+e.item.condition.temp+" °C.");break}if("is"==s[0]){for(var i=0;i<s.length;i++)if(~t.indexOf(s[i]))switch(console.log(s[i]),console.log("test"),s[i]){case"good":case"nice":case"hot":case"warm":if(console.log(e.item.condition.temp),e.item.condition.temp>20){createAndAddNewResponse("Yes, it's a hot day! The temperature is "+e.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, today is a cold day. It's only "+e.item.condition.temp+" °C.");break;case"bad":case"cold":case"ugly":if(e.item.condition.temp<15){createAndAddNewResponse("Yes, today you should remain inside. The temperature is only  "+e.item.condition.temp+" °C.");break}createAndAddNewResponse("Nope, it's quite hot today. The temperature is "+e.item.condition.temp+" °C.")}}else createAndAddNewResponse("Please write a full sentence, you lazy one.");break;case"sunrise":createAndAddNewResponse("The sunrise is at "+e.astronomy.sunrise);break;case"sunset":createAndAddNewResponse("The sunset is at "+e.astronomy.sunset);break;case"humidity":createAndAddNewResponse("what"==s[0]||"what's"==s[0]||"could"==s[0]&&"you"==s[1]||"would"==s[0]&&"you"==s[1]?"The humidity is "+e.atmosphere.humidity+"%.":"Please write a full sentence, you lazy one.");break;case"--":removeAllOutput(),checkstate(state),body.style.background='url("../images/normal.jpg")'}return 1==o&&createAndAddNewResponse("I don't understand what you're saying. Might I suggest google?"),o=1,!1}},n.open("GET","http://query.yahooapis.com/v1/public/yql?q="+query+"&format=json",!0),n.send()}function checkstate(e){1==e&&(input.placeholder="Enter a city",createAndAddNewResponse("Please enter a city.")),e>1&&(input.placeholder="Ask me anything")}function removeAllOutput(){for(messages=document.querySelector(".chatwindow");messages.hasChildNodes();)messages.removeChild(messages.firstChild);return state=1}function writeInput(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#8BFD",t.style.color="white",t.style.float="right",t.style.padding="10px",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var o=document.createElement("section");o.style.clear="both",messages.appendChild(t),messages.append(o),messages.lastChild.scrollIntoView(!0),console.log("ikschweg")}function createAndAddNewResponse(e){var t=document.createElement("section");t.innerHTML=e,t.style.backgroundColor="#F6F4F5",t.style.padding="10px",t.style.float="left",t.style.color="#666465",t.style.width="auto",t.style.margin="20px",t.style.borderRadius="10px",t.style.maxWidth="300px";var o=document.createElement("section");o.style.clear="both",messages.appendChild(t),messages.appendChild(o),messages.lastChild.scrollIntoView(!0)}function getRandomResponse(e){return e[Math.floor(Math.random()*e.length)]}console.log("ddd");var chosen_city,query="",holder="",input="",messages="",chatwindow="",help="",form_box="",body="",citydata="",datakeywords=["--","weather","humidity","sunrise","sunset","warm","temperature","rain","clouds","hot","cold","freezing","freeze","snow","fahrenheit","kelvin","time","forecast","date","nice","good","bad","ugly"],leestekens=[".","?","!"],state=1,output="",adjectives=[],bool=0;document.addEventListener("DOMContentLoaded",function(){input=document.querySelector(".input__text"),holder=document.querySelector(".holder"),messages=document.querySelector(".chatwindow"),help=document.querySelector(".title__help"),form_box=document.querySelector(".form_box"),body=document.querySelector("body"),console.log(body),checkstate(state),document.addEventListener("keypress",function(e){13==e.keyCode&&(checkInput(input.value),input.value="")}),help.addEventListener("click",function(e){form_box.style.display="block"})});